@page "/authorize/login"
@attribute [AllowAnonymous]
@inject NavigationManager Navigation
<PageTitle>Страница авторизации</PageTitle>
<div class="auth-form__owner">
    <EditForm class="auth-form" Model="@loginModel" OnValidSubmit="ValidSubmit">
        <DataAnnotationsValidator  />

        <div class="auth-form-group">
            <InputTextBox @bind-Value="loginModel.Username" Placeholder="Введите логин"></InputTextBox>
            <ValidationMessage For="@(() => loginModel.Username)"></ValidationMessage>
        </div>
        <div class="auth-form-group">

            <InputTextBox @bind-Value="loginModel.Password" Placeholder="Введите пароль"></InputTextBox>
            <ValidationMessage For="@(() => loginModel.Password)"></ValidationMessage>
        </div>

        <NavLink href="/authorize/admin-info">
            <div class="auth-form-question">
                <MudIcon Icon="@Icons.Material.Filled.QuestionMark" Class="auth-form-question__icon"></MudIcon>
                <span class="auth-form-question__text">
                    Хотите стать администратором?
                </span>

            </div>    
        </NavLink>

        <button class="custom-button custom-button-red"  type="submit">Войти</button>
    </EditForm>
</div>


@code {
    private LoginModel loginModel = new LoginModel();

    void ValidSubmit(EditContext context)
    {
        Navigation.NavigateTo("/authorize/admin-info");
    }

    public class LoginModel
    {
        [Required(ErrorMessage = "Имя пользователя обязательно!")]
        [MinLength(8, ErrorMessage = "Длина имени должна быть от {1} символов")]
        public string? Username { get; set; }

        [Required(ErrorMessage = "Пароль обязателен!")]
        [MinLength(10, ErrorMessage = "Длина пароля должна быть от {1} символов")]
        public string? Password { get; set; }
    }
}
