@page "/kanban"
@attribute [Authorize(Roles = "Student, Teacher")]
<PageTitle>Kanban Доска</PageTitle>
<SectionContent SectionName="SupstringSection">
    Страница с Kanban доской
</SectionContent>
<SfKanban TValue="TasksModel" KeyField="Status" DataSource="Tasks">
    <KanbanColumns>
        <KanbanColumn HeaderText="Очередь" KeyField="@(new List<string>() {"Open"})"></KanbanColumn>
        <KanbanColumn HeaderText="В процессе" KeyField="@(new List<string>() {"InProgress"})"></KanbanColumn>
        <KanbanColumn HeaderText="Тестирование" KeyField="@(new List<string>() {"Testing"})"></KanbanColumn>
        <KanbanColumn HeaderText="Выполнено" KeyField="@(new List<string>() {"Close"})"></KanbanColumn>
    </KanbanColumns>
    <KanbanCardSettings HeaderField="Title" ContentField="Summary"></KanbanCardSettings>
</SfKanban>

@code {
    [CascadingParameter]
    public LayoutBase? Layout { get; set; }

    protected override void OnInitialized()
    {
        if (Layout is not null)
            Layout.Links = new List<BreadcrumbItem>
            {
                new BreadcrumbItem("Домашняя страница", href: "/", disabled: false),
                new BreadcrumbItem("Канбан", href: "/kanban", disabled: true),
            };

    }
    public List<TasksModel> Tasks = new List<TasksModel>()
    {
        new TasksModel { Id = "Задача 1", Title = "BLAZ-29001", Status = "Open", Summary = "Проанализировать экономическую эффективность дипломного проекта" },
        new TasksModel { Id = "Задача 2", Title = "BLAZ-29002", Status = "Open", Summary = "Изучить последствия внедрения проекта в предприятие." },
        new TasksModel { Id = "Задача 3", Title = "BLAZ-29003", Status = "InProgress", Summary = "Улучшить производительность приложения." },
        new TasksModel { Id = "Задача 4", Title = "BLAZ-29004", Status = "Testing", Summary = "Исправление ошибок аутентификации." },
        new TasksModel { Id = "Задача 5", Title = "BLAZ-29005", Status = "Testing", Summary = "Собственные стилизованные статусы потери содинения, неудачных попыток и отказа сервера." },
        new TasksModel { Id = "Задача 6", Title = "BLAZ-29006", Status = "Close", Summary = "Анализ MS SQL 2022." },
        new TasksModel { Id = "Задача 7", Title = "BLAZ-29007", Status = "Close", Summary = "Изучение Grid компонента." },
        new TasksModel { Id = "Задача 8", Title = "BLAZ-29008", Status = "Close", Summary = "Хранение изначальных данных компонента на сервере." }
    };

    public class TasksModel
    {
        public string Id { get; set; }
        public string Title { get; set; }
        public string Status { get; set; }
        public string Summary { get; set; }
    }
}
